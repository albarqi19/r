<!DOCTYPE html>
<html dir="rtl">
<head>
    <title>إعداد البيانات</title>
    <meta charset="UTF-8">
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="assets/js/firebase-service.js"></script>
</head>
<body style="font-family: Arial; padding: 20px; background: #f5f5f5;">
    <h1>إعداد البيانات الأولية</h1>
    <button onclick="runSetup()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
        تشغيل إعداد البيانات
    </button>
    <div id="status" style="margin-top: 20px; padding: 10px; background: white; border-radius: 5px;"></div>

    <script>
        async function runSetup() {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = '⏳ جاري إعداد البيانات...';
            
            try {
                // انتظار تحميل Firebase Service
                while (!window.firebaseService || !window.firebaseService.setupInitialData) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
                
                statusDiv.innerHTML += '<br>✅ Firebase Service جاهز';
                
                // تشغيل إعداد البيانات
                await window.firebaseService.setupInitialData();
                
                statusDiv.innerHTML += '<br>🎉 تم إعداد البيانات بنجاح!';
                
                // جلب البيانات للتأكد
                const result = await window.firebaseService.getAllBranches();
                if (result.success) {
                    statusDiv.innerHTML += `<br>📊 تم العثور على ${Object.keys(result.data).length} فروع`;
                    statusDiv.innerHTML += '<br><pre>' + JSON.stringify(result.data, null, 2) + '</pre>';
                }
                
            } catch (error) {
                console.error('خطأ:', error);
                statusDiv.innerHTML += '<br>❌ خطأ: ' + error.message;
            }
        }
    </script>
</body>
</html>
