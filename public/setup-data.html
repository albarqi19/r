<!DOCTYPE html>
<html dir="rtl">
<head>
    <title>Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</title>
    <meta charset="UTF-8">
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="assets/js/firebase-service.js"></script>
</head>
<body style="font-family: Arial; padding: 20px; background: #f5f5f5;">
    <h1>Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©</h1>
    <button onclick="runSetup()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
        ØªØ´ØºÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    </button>
    <div id="status" style="margin-top: 20px; padding: 10px; background: white; border-radius: 5px;"></div>

    <script>
        async function runSetup() {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...';
            
            try {
                // Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Firebase Service
                while (!window.firebaseService || !window.firebaseService.setupInitialData) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
                
                statusDiv.innerHTML += '<br>âœ… Firebase Service Ø¬Ø§Ù‡Ø²';
                
                // ØªØ´ØºÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                await window.firebaseService.setupInitialData();
                
                statusDiv.innerHTML += '<br>ğŸ‰ ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!';
                
                // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØ£ÙƒØ¯
                const result = await window.firebaseService.getAllBranches();
                if (result.success) {
                    statusDiv.innerHTML += `<br>ğŸ“Š ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${Object.keys(result.data).length} ÙØ±ÙˆØ¹`;
                    statusDiv.innerHTML += '<br><pre>' + JSON.stringify(result.data, null, 2) + '</pre>';
                }
                
            } catch (error) {
                console.error('Ø®Ø·Ø£:', error);
                statusDiv.innerHTML += '<br>âŒ Ø®Ø·Ø£: ' + error.message;
            }
        }
    </script>
</body>
</html>
