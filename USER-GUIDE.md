# دليل تشغيل نظام تحفيظ الشرقية

## 🚀 البدء السريع

### 1. إعداد Firebase
1. افتح ملف `setup-firebase.html` في المتصفح
2. اضغط على "إعداد شامل (كل شيء)"
3. انتظر حتى تكتمل جميع العمليات
4. انسخ قواعد الأمان وطبقها في Firebase Console

### 2. اختبار النظام
- افتح `home.html` - الصفحة الرئيسية
- جرب فتح أي فرع من الروابط
- اذهب إلى `auth/login.html` لتسجيل الدخول

---

## 📁 هيكل المشروع

```
├── home.html              # الصفحة الرئيسية
├── branch-template.html   # قالب الفروع (ديناميكي)
├── setup-firebase.html    # أداة إعداد Firebase
│
├── assets/
│   ├── css/
│   │   └── main.css      # الأنماط الرئيسية
│   └── js/
│       ├── app.js        # وظائف عامة
│       ├── branches-data.js    # بيانات الفروع
│       └── firebase-service.js # خدمات Firebase
│
├── auth/
│   └── login.html        # صفحة تسجيل الدخول
│
├── dashboard/
│   └── index.html        # لوحة تحكم الفروع
│
└── admin/
    └── index.html        # لوحة المدير
```

---

## 🔧 كيفية العمل

### الفروع الديناميكية
- جميع الفروع تستخدم ملف واحد: `branch-template.html`
- البيانات مخزنة في `assets/js/branches-data.js`
- يتم تحديد الفرع من URL: `?branch=garb-dammam`

### إضافة فرع جديد
1. افتح `assets/js/branches-data.js`
2. أضف الفرع الجديد في `branches` object:
```javascript
'my-new-branch': {
    id: 'my-new-branch',
    name: 'اسم الفرع الجديد',
    twitter: 'رابط تويتر',
    whatsapp: 'رقم الواتساب',
    // باقي البيانات...
}
```
3. أضف رابط الفرع في `home.html`

### تحديث وسائل التواصل لجميع الفروع
1. افتح `assets/js/branches-data.js`
2. عدّل `globalSocialLinks` للروابط المشتركة
3. أو عدّل فرع محدد في `branches` object

---

## 🔐 نظام المصادقة والأدوار

### أنواع المستخدمين
1. **المدير العام** - صلاحيات كاملة
2. **مدير الفرع** - تحديث فرعه فقط
3. **مشاهد** - مشاهدة فقط

### بيانات تسجيل الدخول التجريبية
- المدير: `admin@tahfeez.com` / `admin123`
- مدير فرع: `manager@garb.com` / `manager123`

### صفحات النظام
1. **تسجيل الدخول**: `auth/login.html`
2. **لوحة التحكم**: `dashboard/index.html` (مدراء الفروع)
3. **لوحة المدير**: `admin/index.html` (المدير العام)

---

## 🔄 نظام التحديثات والموافقات

### كيف يعمل
1. مدير الفرع يعدل بيانات فرعه في لوحة التحكم
2. يتم إرسال طلب تحديث إلى Firebase
3. المدير العام يراجع الطلبات في لوحة المدير
4. بعد الموافقة، تظهر التحديثات في الموقع

### Firebase Database Structure
```
├── branches/           # بيانات الفروع
├── updateRequests/     # طلبات التحديث
├── users/             # بيانات المستخدمين
└── approvals/         # سجل الموافقات
```

---

## 🎨 التصميم والألوان

### نظام الألوان
- **أزرق رسمي**: `#1e40af`, `#3b82f6`
- **أخضر**: `#059669`, `#10b981`  
- **رمادي**: `#374151`, `#6b7280`
- **أبيض نقي**: `#ffffff`

### المميزات
- ✅ متوافق مع الجوال
- ✅ تصميم فلات بدون تدرجات
- ✅ ألوان رسمية من الشعار
- ✅ خطوط عربية واضحة

---

## 🛠️ الصيانة والتطوير

### إضافة وسيلة تواصل جديدة
راجع ملف `HOW-TO-ADD-SOCIAL.md` للتفاصيل

### تحديث التصميم
- الأنماط الرئيسية في `assets/css/main.css`
- استخدم Tailwind CSS classes
- حافظ على الألوان الرسمية

### إضافة وظائف جديدة
- الوظائف العامة في `assets/js/app.js`
- وظائف Firebase في `assets/js/firebase-service.js`
- بيانات الفروع في `assets/js/branches-data.js`

---

## 🐛 استكشاف الأخطاء

### مشاكل شائعة
1. **لا تظهر بيانات الفرع**
   - تأكد من معرف الفرع في URL
   - تحقق من `branches-data.js`

2. **خطأ في Firebase**
   - تأكد من إعداد Firebase Rules
   - تحقق من صحة التكوين في `firebase-service.js`

3. **مشكلة في تسجيل الدخول**
   - تحقق من إعدادات Authentication في Firebase
   - تأكد من تفعيل Email/Password provider

### أدوات التشخيص
- افتح Developer Tools (F12)
- راجع Console للأخطاء
- تحقق من Network tab للطلبات الفاشلة

---

## 📱 التوافق

### المتصفحات المدعومة
- ✅ Chrome/Edge 88+
- ✅ Firefox 78+
- ✅ Safari 14+
- ✅ Mobile browsers

### الأجهزة
- ✅ Desktop
- ✅ Tablet
- ✅ Mobile (iOS/Android)

---

## 📞 الدعم الفني

### في حالة وجود مشاكل
1. راجع هذا الدليل أولاً
2. تحقق من Console في المتصفح
3. تأكد من إعداد Firebase بشكل صحيح
4. راجع ملفات البيانات

### تطوير إضافي
- يمكن إضافة المزيد من الفروع بسهولة
- قابل للتوسع مع المزيد من الوظائف
- مصمم ليكون سهل الصيانة

---

## 🔄 التحديثات المستقبلية

### مميزات مقترحة
- [ ] نظام إشعارات للتحديثات
- [ ] تقارير إحصائية
- [ ] نسخ احتياطية تلقائية
- [ ] نظام ملفات للوثائق
- [ ] API للتطبيقات الخارجية

### خارطة الطريق
- تحسين واجهة المدير
- إضافة المزيد من وسائل التواصل
- نظام تعليقات للطلبات
- لوحة تحليلات متقدمة

---

*آخر تحديث: ديسمبر 2024*
