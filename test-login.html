<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار تسجيل الدخول - تحفيظ الشرقية</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .test-card {
            transition: all 0.3s ease;
        }
        .test-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8 text-blue-600">🧪 اختبار تسجيل الدخول</h1>
        
        <!-- حالة النظام -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-xl font-bold mb-4 text-green-600">✅ حالة النظام</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="text-center">
                    <div class="text-2xl mb-2">🔗</div>
                    <div class="font-semibold">قاعدة البيانات</div>
                    <div class="text-green-600">متصلة</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl mb-2">🏢</div>
                    <div class="font-semibold">الفروع</div>
                    <div class="text-green-600">11 فرع</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl mb-2">👤</div>
                    <div class="font-semibold">المستخدمون</div>
                    <div class="text-green-600">جاهز</div>
                </div>
            </div>
        </div>

        <!-- بيانات تسجيل الدخول -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            
            <!-- حساب الإدارة -->
            <div class="test-card bg-gradient-to-br from-red-50 to-red-100 rounded-lg shadow-md p-6 border border-red-200">
                <div class="flex items-center mb-4">
                    <div class="bg-red-500 text-white rounded-full w-10 h-10 flex items-center justify-center mr-3">
                        👑
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-red-700">حساب الإدارة</h3>
                        <p class="text-sm text-red-600">وصول كامل لجميع الفروع</p>
                    </div>
                </div>
                
                <div class="space-y-2 text-sm">
                    <div><strong>البريد الإلكتروني:</strong> admin@tahfeez-sharqiya.com</div>
                    <div><strong>كلمة المرور:</strong> admin123</div>
                    <div><strong>الصلاحية:</strong> مدير عام</div>
                </div>
                
                <button onclick="testLogin('admin@tahfeez-sharqiya.com', 'admin123')" 
                        class="mt-4 w-full bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg transition-colors">
                    اختبار الدخول
                </button>
            </div>

            <!-- حساب فرع غرب الدمام -->
            <div class="test-card bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow-md p-6 border border-blue-200">
                <div class="flex items-center mb-4">
                    <div class="bg-blue-500 text-white rounded-full w-10 h-10 flex items-center justify-center mr-3">
                        🏢
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-blue-700">فرع غرب الدمام</h3>
                        <p class="text-sm text-blue-600">وصول محدود للفرع فقط</p>
                    </div>
                </div>
                
                <div class="space-y-2 text-sm">
                    <div><strong>البريد الإلكتروني:</strong> garb@tahfeez-sharqiya.com</div>
                    <div><strong>كلمة المرور:</strong> admin123</div>
                    <div><strong>الصلاحية:</strong> مدير فرع</div>
                </div>
                
                <button onclick="testLogin('garb@tahfeez-sharqiya.com', 'admin123')" 
                        class="mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors">
                    اختبار الدخول
                </button>
            </div>

            <!-- حساب فرع الخبر -->
            <div class="test-card bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow-md p-6 border border-green-200">
                <div class="flex items-center mb-4">
                    <div class="bg-green-500 text-white rounded-full w-10 h-10 flex items-center justify-center mr-3">
                        🏢
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-green-700">فرع الخبر</h3>
                        <p class="text-sm text-green-600">وصول محدود للفرع فقط</p>
                    </div>
                </div>
                
                <div class="space-y-2 text-sm">
                    <div><strong>البريد الإلكتروني:</strong> khobar@tahfeez-sharqiya.com</div>
                    <div><strong>كلمة المرور:</strong> admin123</div>
                    <div><strong>الصلاحية:</strong> مدير فرع</div>
                </div>
                
                <button onclick="testLogin('khobar@tahfeez-sharqiya.com', 'admin123')" 
                        class="mt-4 w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition-colors">
                    اختبار الدخول
                </button>
            </div>

            <!-- اختبار خاطئ -->
            <div class="test-card bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg shadow-md p-6 border border-gray-200">
                <div class="flex items-center mb-4">
                    <div class="bg-gray-500 text-white rounded-full w-10 h-10 flex items-center justify-center mr-3">
                        ❌
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-gray-700">اختبار فاشل</h3>
                        <p class="text-sm text-gray-600">بيانات خاطئة للاختبار</p>
                    </div>
                </div>
                
                <div class="space-y-2 text-sm">
                    <div><strong>البريد الإلكتروني:</strong> wrong@email.com</div>
                    <div><strong>كلمة المرور:</strong> wrongpassword</div>
                    <div><strong>المتوقع:</strong> رسالة خطأ</div>
                </div>
                
                <button onclick="testLogin('wrong@email.com', 'wrongpassword')" 
                        class="mt-4 w-full bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-colors">
                    اختبار الفشل
                </button>
            </div>
        </div>

        <!-- منطقة النتائج -->
        <div class="mt-8 bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-bold mb-4">📋 نتائج الاختبار</h2>
            <div id="results" class="bg-gray-50 p-4 rounded-lg min-h-32 max-h-96 overflow-y-auto">
                <p class="text-gray-500">لا توجد نتائج بعد... اختر أحد الاختبارات أعلاه</p>
            </div>
        </div>

        <!-- روابط سريعة -->
        <div class="mt-8 text-center">
            <h3 class="text-lg font-bold mb-4">🔗 روابط سريعة</h3>
            <div class="flex flex-wrap gap-4 justify-center">
                <a href="public/auth/login.html" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors">
                    صفحة تسجيل الدخول
                </a>
                <a href="public/index.html" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition-colors">
                    الصفحة الرئيسية
                </a>
                <a href="test-database.html" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-2 rounded-lg transition-colors">
                    اختبار قاعدة البيانات
                </a>
            </div>
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const timestamp = new Date().toLocaleTimeString('ar-SA');
            const color = type === 'error' ? 'text-red-600' : type === 'success' ? 'text-green-600' : 'text-blue-600';
            
            results.innerHTML += `<div class="mb-2"><span class="text-gray-400">${timestamp}</span> <span class="${color}">${message}</span></div>`;
            results.scrollTop = results.scrollHeight;
        }

        async function testLogin(email, password) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = ''; // مسح النتائج السابقة
            
            log(`🧪 بدء اختبار تسجيل الدخول...`);
            log(`📧 الإيميل: ${email}`);
            log(`🔐 كلمة المرور: ${password}`);
            
            // محاكاة وظيفة المصادقة
            const defaultCredentials = {
                'admin@tahfeez-sharqiya.com': {
                    password: 'admin123',
                    role: 'admin',
                    name: 'مدير النظام',
                    branchId: null
                },
                'garb@tahfeez-sharqiya.com': {
                    password: 'admin123',
                    role: 'branch',
                    name: 'مسؤول فرع غرب الدمام',
                    branchId: 'garb-dammam'
                },
                'khobar@tahfeez-sharqiya.com': {
                    password: 'admin123',
                    role: 'branch',
                    name: 'مسؤول فرع الخبر',
                    branchId: 'khobar'
                }
            };
            
            // محاكاة تأخير الشبكة
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            if (defaultCredentials[email] && defaultCredentials[email].password === password) {
                const credential = defaultCredentials[email];
                log(`✅ تم تسجيل الدخول بنجاح!`, 'success');
                log(`👤 الاسم: ${credential.name}`, 'success');
                log(`🔖 الصلاحية: ${credential.role}`, 'success');
                log(`🏢 الفرع: ${credential.branchId || 'جميع الفروع'}`, 'success');
                
                if (credential.role === 'admin') {
                    log(`🎯 سيتم التوجيه إلى: لوحة تحكم الإدارة`, 'success');
                } else {
                    log(`🎯 سيتم التوجيه إلى: لوحة تحكم الفرع`, 'success');
                }
                
                log(`🎉 الاختبار نجح بالكامل!`, 'success');
            } else {
                log(`❌ فشل تسجيل الدخول!`, 'error');
                log(`🔍 السبب: بيانات تسجيل الدخول غير صحيحة`, 'error');
                log(`📋 الإيميلات المقبولة:`, 'error');
                Object.keys(defaultCredentials).forEach(validEmail => {
                    log(`   - ${validEmail}`, 'error');
                });
                log(`⚠️ هذا متوقع للاختبار الفاشل`, 'error');
            }
        }
        
        // رسالة ترحيب
        window.addEventListener('load', () => {
            log('🚀 جاهز لاختبار تسجيل الدخول!');
            log('💡 اختر أحد الاختبارات أعلاه لبدء التجربة');
        });
    </script>
</body>
</html>
