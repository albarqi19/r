# 🔐 دليل إنشاء الحسابات - تحفيظ الشرقية

## 📋 نظرة عامة

تم إنشاء نظام كامل لتوليد وإدارة حسابات المستخدمين في المشروع.

---

## 🎯 الخطوات السريعة

### 1️⃣ توليد كلمات المرور

1. افتح ملف `create-accounts.html` في المتصفح
2. اضغط على زر "🚀 إنشاء جميع الحسابات"
3. **مهم جداً:** اضغط "📥 تحميل ملف كلمات المرور"
4. احفظ الملف في مكان آمن (لن تتمكن من رؤية كلمات المرور مرة أخرى)

### 2️⃣ إنشاء الحسابات في Supabase

لديك خياران:

#### الخيار الأول: Dashboard (يدوياً) - موصى به للمبتدئين

1. اذهب إلى: https://supabase.com/dashboard
2. افتح مشروعك: `aydtrypogxbqerce`
3. من القائمة الجانبية → **Authentication** → **Users**
4. اضغط **Add User** → **Create new user**
5. أدخل البريد الإلكتروني وكلمة المرور من الملف المحفوظ
6. كرر لكل حساب

#### الخيار الثاني: Script (برمجياً) - للمتقدمين

1. افتح ملف `create-accounts-script.js`
2. احصل على **Service Role Key** من:
   - Supabase Dashboard → Settings → API → `service_role` (secret)
3. ضعها في السطر:
   ```javascript
   const supabaseServiceKey = 'ضع المفتاح هنا';
   ```
4. انسخ كلمات المرور من الملف المحفوظ وضعها في السكريبت
5. شغل الأمر:
   ```bash
   node create-accounts-script.js
   ```

---

## 👥 الحسابات المطلوب إنشاؤها

### 👑 المدير العام (1 حساب)
- **البريد:** admin@tahfeez-sharqiya.com
- **الدور:** admin
- **الصلاحيات:** إدارة جميع الفروع والموافقة على التحديثات

### 🏢 مدراء الفروع (11 حساب)
1. garb@tahfeez-sharqiya.com - فرع غرب الدمام
2. sharq@tahfeez-sharqiya.com - فرع شرق الدمام
3. khobar@tahfeez-sharqiya.com - فرع الخبر
4. rafeia@tahfeez-sharqiya.com - فرع الرفيعة
5. baqiq@tahfeez-sharqiya.com - فرع بقيق
6. anak@tahfeez-sharqiya.com - فرع عنك
7. wadi.almiyah@tahfeez-sharqiya.com - فرع وادي المياه
8. alsarar@tahfeez-sharqiya.com - فرع الصرار
9. ras.tanura@tahfeez-sharqiya.com - فرع رأس تنورة
10. qaryah@tahfeez-sharqiya.com - فرع قرية
11. altaeriah@tahfeez-sharqiya.com - فرع التعيرية

---

## 🔒 الأمان

### ✅ ما تم عمله:
- كلمات مرور قوية (16 حرف)
- تحتوي على: أحرف كبيرة، صغيرة، أرقام، رموز
- عشوائية تماماً
- مشفرة في Supabase Auth

### ⚠️ تنبيهات مهمة:
1. **لا تشارك** كلمات المرور عبر البريد الإلكتروني
2. **احفظ** الملف النصي في مكان آمن
3. **يُنصح** بتغيير كلمة المرور عند أول تسجيل دخول
4. **لا تحفظ** كلمات المرور في ملفات غير محمية

---

## 📝 بعد إنشاء الحسابات

### التحقق من النجاح:
1. افتح `check-real-data.html`
2. يجب أن ترى جميع الـ 12 حساب
3. تحقق من أن كل حساب مربوط بالفرع الصحيح

### تسليم الحسابات للمدراء:
1. **المدير العام:**
   - أعطه بريده وكلمة مروره
   - أرسله إلى: `admin/index.html`

2. **مدراء الفروع:**
   - أعطي كل مدير بريده وكلمة مروره الخاصة
   - أرسلهم إلى: `dashboard/index.html`

---

## 🛠️ استكشاف الأخطاء

### المشكلة: "User already exists"
**الحل:** الحساب موجود بالفعل، يمكنك:
- تغيير كلمة المرور من Dashboard
- أو حذف الحساب وإعادة إنشائه

### المشكلة: "Invalid email"
**الحل:** تأكد من صيغة البريد الإلكتروني صحيحة

### المشكلة: "Password too weak"
**الحل:** كلمات المرور المولدة قوية، لكن تأكد من نسخها بالكامل

---

## 📚 ملفات المشروع

```
📁 المشروع/
├── create-accounts.html          # توليد كلمات المرور
├── create-accounts-script.js     # سكريبت إنشاء الحسابات
├── check-real-data.html          # التحقق من البيانات
├── test-database-connection.html # اختبار الاتصال الشامل
└── ACCOUNTS-GUIDE.md            # هذا الملف
```

---

## 🎓 نصائح احترافية

1. **استخدم مدير كلمات مرور** مثل:
   - 1Password
   - LastPass
   - Bitwarden

2. **فعّل المصادقة الثنائية (2FA)** إذا كنت تستخدم Supabase في الإنتاج

3. **راقب النشاطات** من خلال جدول `event_logs`

4. **نسخة احتياطية** من ملف كلمات المرور في مكان آمن

---

## 📞 الدعم

إذا واجهت أي مشاكل:
1. تحقق من console في المتصفح (F12)
2. راجع Supabase Dashboard → Logs
3. تأكد من صلاحيات RLS في قاعدة البيانات

---

## ✅ قائمة التحقق

- [ ] تم توليد كلمات المرور
- [ ] تم تحميل ملف كلمات المرور
- [ ] تم حفظ الملف في مكان آمن
- [ ] تم إنشاء جميع الـ 12 حساب في Supabase Auth
- [ ] تم التحقق من الحسابات في `check-real-data.html`
- [ ] تم تسليم بيانات المدير العام
- [ ] تم تسليم بيانات مدراء الفروع
- [ ] تم اختبار تسجيل الدخول لحساب واحد على الأقل

---

**تاريخ الإنشاء:** 29 سبتمبر 2025  
**الإصدار:** 1.0  
**الحالة:** جاهز للإنتاج ✅
